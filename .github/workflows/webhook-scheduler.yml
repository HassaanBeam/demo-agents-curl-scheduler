name: Webhook Scheduler

on:
  schedule:
    - cron: '0 0,4,8,12,16,20 * * 1-6'  # Every 4 hours: 12AM, 4AM, 8AM, 12PM, 4PM, 8PM
  workflow_dispatch: # Manual trigger for testing

jobs:
  run-webhooks:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      
    - name: Run all webhooks sequentially
      run: |
        echo "Starting webhook batch at $(date)"
        
        # Make webhook files executable
        chmod +x webhooks/*.sh
        
        # Run each webhook file with 5 second intervals
        for webhook in webhooks/*.sh; do
          if [ -f "$webhook" ]; then
            echo "Running $(basename $webhook)..."
            bash "$webhook"
            echo "âœ“ Completed $(basename $webhook)"
            sleep 5  # 5 second pause between webhooks
          fi
        done
        
        echo "All webhooks completed at $(date)"
